<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Send Email to Ministries</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
        input, button { padding: 10px; margin: 10px; width: 80%; max-width: 400px; }
        button { background: #007BFF; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>

    <h2>Enter Your Details</h2>

    <form id="userForm">
        <input type="text" id="name" placeholder="Enter Your Name" required><br>
        <input type="email" id="email" placeholder="Enter Your Email" required><br>
        <button type="submit">Proceed to Send Email</button>
    </form>

    <div id="emailSection" style="display: none;">
        <h2>Send Pre-Filled Emails</h2>
        <button onclick="sendEmailToIndia()">ðŸ“© Email Ministry of Education, India</button>
        <button onclick="sendEmailToHungary()">ðŸ“© Email Ministry of Education, Hungary</button>
    </div>

    <script>
        document.getElementById("userForm").addEventListener("submit", function(event) {
            event.preventDefault();

            let name = document.getElementById("name").value;
            let email = document.getElementById("email").value;

            // Save to Google Sheets
            fetch("https://script.google.com/macros/s/AKfycbz6Ai_mHnshgcv6VWuwYKLj6t4h0Exz9yxEMeVPj-q-1QorOt-hw6TdQ-MqyiX8j0bagA/exec", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: `name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}`
            }).then(response => response.text())
            .then(data => {
                if (data === "Success") {
                    // Show email buttons and hide form
                    document.getElementById("userForm").style.display = "none";
                    document.getElementById("emailSection").style.display = "block";

                    // Store name & email for pre-filled email
                    localStorage.setItem("userName", name);
                    localStorage.setItem("userEmail", email);
                } else {
                    alert("Error saving data. Try again.");
                }
            });
        });

        function sendEmailToIndia() {
            let name = localStorage.getItem("userName") || "[Your Name]";
            let email = localStorage.getItem("userEmail") || "[Your Email]";

            let subject = "Urgent Request for Renewal of MoU Between India and Hungary for Stipendium Hungaricum Scholarship";
            let body = `Dear Sir/Madam,%0A%0A` +
                       `I am writing to bring to your attention the urgent need to renew the Memorandum of Understanding (MoU) between India and Hungary for the Stipendium Hungaricum Scholarship. This MoU expired two years ago, and as a result, Indian students have not been able to receive nominations for this prestigious scholarship program.%0A%0A` +
                       `Best regards,%0A${name}%0A${email}`;

            let mailtoLink = `mailto:contact.edu@gov.in,info.edu@gov.in?subject=${encodeURIComponent(subject)}&body=${body}`;
            window.location.href = mailtoLink;
        }

        function sendEmailToHungary() {
            let name = localStorage.getItem("userName") || "[Your Name]";
            let email = localStorage.getItem("userEmail") || "[Your Email]";

            let subject = "Request for MoU Renewal with India â€“ Stipendium Hungaricum Scholarship";
            let body = `Dear Sir/Madam,%0A%0A` +
                       `I am reaching out regarding the Memorandum of Understanding (MoU) between Hungary and India for the Stipendium Hungaricum Scholarship, which expired two years ago and has not yet been renewed.%0A%0A` +
                       `Best regards,%0A${name}%0A${email}`;

            let mailtoLink = `mailto:office@itm.gov.hu,stipendiumhungaricum@itm.gov.hu?subject=${encodeURIComponent(subject)}&body=${body}`;
            window.location.href = mailtoLink;
        }
    </script>

</body>
</html>
